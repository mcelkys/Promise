"Promise"in self||function(){function e(t,e){this.status=t,this.handler=e}function s(t){e.call(this,2,t)}function r(t){e.call(this,3,t)}function o(t){e.call(this,1,t)}((e.prototype=Object.create(Object.prototype)).constructor=e).prototype.invoke=function(e){e._status=0;try{var t=this.handler(e._value);t instanceof Promise?(t.then(e._resolve.bind(e)),t.catch(e._reject.bind(e))):e._resolve(t)}catch(t){e._reject(t)}},(s.prototype=Object.create(e.prototype)).constructor=s,(r.prototype=Object.create(e.prototype)).constructor=r,((o.prototype=Object.create(e.prototype)).constructor=o).prototype.invoke=function(e){try{this.handler(),e._settle()}catch(t){e._status=0,e._reject(t)}},self.Promise=function(t){this._status=0,this._value=void 0,this._subscribers=[];var e=this;try{t(function(t){e._resolve(t)},function(t){e._reject(t)})}catch(t){this._reject(t)}},Promise.prototype=Object.create(Object.prototype),Promise.prototype.constructor=Promise,Promise.prototype.then=function(t,e){var r=new s(t);return this._addSubscriber(r),"function"==typeof e&&this.catch(e),this},Promise.prototype.catch=function(t){var e=new r(t);return this._addSubscriber(e)},Promise.prototype.finally=function(t){var e=new o(t);return this._addSubscriber(e)},Promise.prototype._addSubscriber=function(t){return this._subscribers.push(t),this._settle(),this},Promise.prototype._resolve=function(t){0===this._status&&(this._status=2,this._value=t,this._settle())},Promise.prototype._reject=function(t){0===this._status&&(this._status=3,this._value=t,this._settle())},Promise.prototype._settle=function(){var t;if(0<this._status){for(;0<this._subscribers.length&&(t=this._subscribers.shift()).status!==this._status&&1!==t.status;)t=null;t?t.invoke(this):3===this._status&&console.error("Uncaught (in promise)",this._value)}},Promise.resolve=function(r){return new Promise(function(t,e){r instanceof Promise?(r.then(t),r.catch(e)):t(r)})},Promise.reject=function(r){return new Promise(function(t,e){value instanceof Promise?(value.then(t),value.catch(e)):e(r)})},Promise.all=function(u){return new Promise(function(r,t){var e,s,o=u.length,n=new Array(o),i=0;function c(e){return function(t){n[e]=t,o<=++i&&r(n)}}for(s=0;s<o;s++)(e=u[s])instanceof Promise?(e.then(c(s)),e.catch(t)):(n[s]=e,i++);o<=i&&r(n)})},Promise.allSettled=function(a){return new Promise(function(r){var t,e,s=a.length,o=new Array(s),n=0;function i(t,e){o[t]=e,s<=++n&&r(o)}function c(e){return function(t){i(e,{status:"fulfilled",value:t})}}function u(e){return function(t){i(e,{status:"rejected",reason:t})}}for(e=0;e<s;e++)(t=a[e])instanceof Promise?(t.then(c(e)),t.catch(u(e))):(o[e]={status:"fulfilled",value:t},n++);s<=n&&r(o)})},Promise.race=function(n){return new Promise(function(t,e){var r,s,o=n.length;for(s=0;s<o;s++)(r=n[s])instanceof Promise?(r.then(t),r.catch(e)):t(r)})}}();